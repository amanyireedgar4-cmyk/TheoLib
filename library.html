<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>TheoLib â€” Library</title>
  <link rel="stylesheet" href="styles.css" />
</head>

<body class="library-page">

  <header class="top-bar">
    <h1>TheoLib Library</h1>
    <nav>
      <a href="mylibrary.html">My Library</a>
      <a href="dashboard.html">Dashboard</a>
      <a href="#" onclick="logoutUser()">Logout</a>
    </nav>
  </header>

  <!-- AI PANEL -->
  <section class="ai-panel">
    <h2>AI Inspiration</h2>
    <p>Need reading inspiration? AI will suggest books here.</p>
    <button disabled>Coming Soon</button>
  </section>

  <!-- BOOKS -->
  <section class="book-grid" id="bookGrid">
    <!-- injected by JS -->
  </section>

  <!-- LOGIN WALL -->
  <div id="loginWall" class="login-wall hidden">
    <h2>Unlock Full Library</h2>
    <p>Login to save, read & track books</p>
    <a href="auth.html" class="btn">Login / Sign Up</a>
  </div>

  <script type="module">
    import { auth } from "./firebase.js";
    import { books } from "./library.logic.js";

    const grid = document.getElementById("bookGrid");
    const wall = document.getElementById("loginWall");

    auth.onAuthStateChanged(user => {
      renderBooks(user);
      if (!user) wall.classList.remove("hidden");
    });

    function renderBooks(user) {
      grid.innerHTML = "";
      books.forEach((book, index) => {
        if (!user && index >= 2) return;

        const card = document.createElement("div");
        card.className = "book-card";

        card.innerHTML = `
          <img src="${book.cover}" />
          <h3>${book.title}</h3>
          <p>${book.author}</p>
          <button onclick="readBook('${book.id}')">Read</button>
          ${user ? `<button onclick="saveBook('${book.id}')">Save</button>` : ""}
        `;
        grid.appendChild(card);
      });
    }

    window.readBook = id => {
      alert("Reading book: " + id);
    };

    window.saveBook = id => {
      alert("Saved book: " + id);
    };

    window.logoutUser = () => {
      auth.signOut();
      location.href = "index.html";
    };
  </script>

</body>
</html>
