<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Library | TheoLib</title>

<style>
  body {
    margin: 0;
    font-family: Arial, sans-serif;
    background: #020617;
    color: #e5e7eb;
  }

  header {
    padding: 20px;
    text-align: center;
    border-bottom: 1px solid #1e293b;
  }

  h1 {
    color: #38bdf8;
  }

  .library {
    padding: 30px;
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 25px;
  }

  .book {
    background: #0f172a;
    border-radius: 14px;
    overflow: hidden;
    box-shadow: 0 0 20px rgba(0,0,0,0.4);
    display: flex;
    flex-direction: column;
  }

  .thumb {
    height: 260px;
    background: linear-gradient(135deg, #38bdf8, #0ea5e9);
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 60px;
  }

  .info {
    padding: 15px;
    flex-grow: 1;
  }

  .info h3 {
    margin: 0;
    font-size: 16px;
  }

  .info p {
    font-size: 13px;
    opacity: 0.85;
  }

  .tag {
    display: inline-block;
    font-size: 11px;
    padding: 4px 8px;
    background: #1e293b;
    border-radius: 6px;
    margin-top: 8px;
  }

  .lock {
    background: #020617cc;
    padding: 10px;
    text-align: center;
    font-size: 13px;
    cursor: pointer;
    border-top: 1px solid #1e293b;
  }

  .lock:hover {
    background: #020617;
  }

  /* MODAL */
  .modal {
    position: fixed;
    inset: 0;
    background: rgba(0,0,0,0.7);
    display: none;
    align-items: center;
    justify-content: center;
  }

  .modal-box {
    background: #0f172a;
    padding: 25px;
    border-radius: 14px;
    width: 90%;
    max-width: 350px;
    text-align: center;
  }

  .modal-box button {
    margin-top: 15px;
    padding: 10px;
    width: 100%;
    border: none;
    border-radius: 8px;
    background: #38bdf8;
    color: #020617;
    font-weight: bold;
    cursor: pointer;
  }
</style>
</head>

<body>

<header>
  <h1>TheoLib Library</h1>
  <p>Explore ideas. Unlock knowledge.</p>
</header>

<div class="library" id="library"></div>

<!-- LOGIN MODAL -->
<div class="modal" id="loginModal">
  <div class="modal-box">
    <h3>Unlock This Book</h3>
    <p>Sign in or subscribe to continue reading.</p>
    <button onclick="goAuth()">Sign In / Sign Up</button>
    <button onclick="closeModal()">Cancel</button>
  </div>
</div>

<script>
const user = localStorage.getItem("currentUser");

// SAMPLE BOOK DATA (can be replaced later)
const books = [
  { title: "Physics O-Level", cat: "Study", free: true, hook: "Master motion, energy & forces." },
  { title: "Ugandan Literature", cat: "Literature", free: false, hook: "Stories that shaped a nation." },
  { title: "Creative Comics Vol.1", cat: "Comics", free: true, hook: "Imagination meets art." },
  { title: "Young Innovators", cat: "Youth", free: false, hook: "Ideas from the next generation." }
];

const lib = document.getElementById("library");

books.forEach(b => {
  const card = document.createElement("div");
  card.className = "book";

  card.innerHTML = `
    <div class="thumb">ðŸ“˜</div>
    <div class="info">
      <h3>${b.title}</h3>
      <p>${b.hook}</p>
      <span class="tag">${b.cat}</span>
    </div>
    <div class="lock">
      ${b.free ? "Free Read" : "Locked â€¢ Click to Unlock"}
    </div>
  `;

  card.querySelector(".lock").onclick = () => {
    if (b.free || user) {
      alert("Open reader (next step)");
    } else {
      openModal();
    }
  };

  lib.appendChild(card);
});

function openModal() {
  document.getElementById("loginModal").style.display = "flex";
}

function closeModal() {
  document.getElementById("loginModal").style.display = "none";
}

function goAuth() {
  window.location.href = "auth.html";
}
</script>

</body>
</html>
